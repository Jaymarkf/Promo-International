{"version":3,"sources":["webpack:///./assets/js/theme/category.js","webpack:///./assets/js/emthemes-modez/search-in-category.js"],"names":["Category","context","validationDictionary","createTranslationDictionary","onReady","autoExpandCategoryMenu","this","themeSettings","show_bulk_order_mode","useBulkOrder","bulkOrder","bulkOrderFactory","compareProducts","$","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","actionBarFactory","categorypage_search","initSearchInCategory","destroy","searchInCategory","facetedSearch","off","SearchInCategory","searchCallback","content","html","productListing","reinit","triggerHandler","animate","scrollTop","onMinPriceError","price_min_evaluation","onMaxPriceError","price_max_evaluation","minPriceNotEntered","price_min_not_entered","maxPriceNotEntered","price_max_not_entered","onInvalidPrice","price_invalid_value","$productListingContainer","$facetedSearchContainer","requestOptions","config","category","shop_by_price","products","limit","categoryProductsPerPage","template","sidebar","showMore","FacetedSearch","validationErrorMessages","CatalogPage","options","doSearch","onInput","onFormSubmit","onClear","onStateChange","$body","$input","$form","closest","$clear","find","hide","originalPathname","window","location","pathname","updateViewCallback","updateViewFacetedSearch","bindEvents","url","Url","parse","urlUtils","getUrl","query","q","val","show","trigger","unbindEvents","event","preventDefault","searchUrl","searchQuery","search_query","search_query_adv","categoryId","categorypage_search_subs","searchsubs","buildQueryString","addClass","api","getPage","err","removeClass","Error","removeParams","goToUrl","replaceParams","requestUrl","stdParams","filterParams","Object","keys","filter","key","indexOf","replace","history","replaceState","document","title","Number","blockerSelector","refreshView"],"mappings":"wUAYqBA,E,oBACjB,WAAYC,GAAS,aACjB,cAAMA,IAAN,MACKC,qBAAuBC,YAA4BF,GAFvC,E,2GAKrBG,QAAA,WAEIC,YAAuBC,KAAKL,SAGxBK,KAAKL,UAAYK,KAAKL,QAAQM,cAAcC,sBAAwBF,KAAKL,QAAQQ,gBACjFH,KAAKI,UAAYC,YAAiBL,KAAKL,UAK3CW,YAAgBN,KAAKL,SAEjBY,EAAE,kBAAkBC,OAAS,EAC7BR,KAAKS,qBAELT,KAAKU,eAAiBV,KAAKU,eAAeC,KAAKX,MAC/CY,IAAMC,GAAG,mBAAoBb,KAAKU,iBAItCI,cAGuD,SAAnDd,KAAKL,QAAQM,cAAcc,qBAC3Bf,KAAKgB,wB,EAKbC,QAAA,WACQjB,KAAKkB,kBACLlB,KAAKkB,iBAAiBD,UAEtBjB,KAAKmB,cACLnB,KAAKmB,cAAcF,UAEnBL,IAAMQ,IAAI,mBAAoBpB,KAAKU,iB,EAK3CM,qBAAA,WAAuB,WACnBhB,KAAKkB,iBAAmB,IAAIG,IAAiB,CACzC1B,QAASK,KAAKL,QACdwB,cAAenB,KAAKmB,cACpBG,eAAgB,SAACC,GACbhB,EAAE,8BAA8BiB,KAAKD,EAAQE,gBAEzC,EAAKrB,WACL,EAAKA,UAAUsB,SAGnBZ,cAEAP,EAAE,QAAQoB,eAAe,gBAEzBpB,EAAE,cAAcqB,QAAQ,CACpBC,UAAW,GACZ,S,EAKfpB,kBAAA,WAAoB,WAChB,EAMIT,KAAKJ,qBALiBkC,EAD1B,EACIC,qBACsBC,EAF1B,EAEIC,qBACuBC,EAH3B,EAGIC,sBACuBC,EAJ3B,EAIIC,sBACqBC,EALzB,EAKIC,oBAEEC,EAA2BjC,EAAE,8BAC7BkC,EAA0BlC,EAAE,6BAE5BmC,EAAiB,CACnBC,OAAQ,CACJC,SAAU,CACNC,eAAe,EACfC,SAAU,CACNC,MANQ/C,KAAKL,QAAQqD,2BAUjCC,SAAU,CACNxB,eAAgB,2BAChByB,QAAS,oBAEbC,SAAU,sBAGdnD,KAAKmB,cAAgB,IAAIiC,IAAcV,GAAgB,SAACnB,GACpDiB,EAAyBhB,KAAKD,EAAQE,gBACtCgB,EAAwBjB,KAAKD,EAAQ2B,SAGjC,EAAK9C,WACL,EAAKA,UAAUsB,SAGnBnB,EAAE,QAAQoB,eAAe,gBAEzBpB,EAAE,cAAcqB,QAAQ,CACpBC,UAAW,GACZ,OACJ,CACCwB,wBAAyB,CACrBvB,kBACAE,kBACAE,qBACAE,qBACAE,qB,GArHsBgB,M,wJCPjBjC,E,WAcjB,WAAYkC,GAERvD,KAAKwD,SAAW,IAASxD,KAAKwD,SAAS7C,KAAKX,MAAO,KACnDA,KAAKyD,QAAUzD,KAAKyD,QAAQ9C,KAAKX,MACjCA,KAAK0D,aAAe1D,KAAK0D,aAAa/C,KAAKX,MAC3CA,KAAK2D,QAAU3D,KAAK2D,QAAQhD,KAAKX,MACjCA,KAAK4D,cAAgB5D,KAAK4D,cAAcjD,KAAKX,MAC7CA,KAAKuD,QAAUA,EACfvD,KAAK6D,MAAQtD,EAAE,QACfP,KAAK8D,OAASvD,EAAE,6BAChBP,KAAK+D,MAAQ/D,KAAK8D,OAAOE,QAAQ,QACjChE,KAAKiE,OAASjE,KAAK+D,MAAMG,KAAK,gBAAgBC,OAC9CnE,KAAKoE,iBAAmBC,OAAOC,SAASC,SAEpChB,GAAWA,EAAQpC,gBACnBnB,KAAKuD,QAAQpC,cAAcqD,mBAAqBxE,KAAKyE,wBAAwB9D,KAAKX,OAGtFA,KAAK0E,aAEL,IAAMC,EAAMC,IAAIC,MAAMC,IAASC,UAAU,GACrCJ,EAAIK,MAAMC,IACVjF,KAAK8D,OAAOoB,IAAIP,EAAIK,MAAMC,GAC1BjF,KAAKiE,OAAOkB,OACZ5E,EAAE8D,QAAQe,QAAQ,gB,2BAI1BnE,QAAA,WAEIjB,KAAKqF,gB,EAGTX,WAAA,WACI1E,KAAK8D,OAAOjD,GAAG,QAASb,KAAKyD,SAC7BzD,KAAK+D,MAAMlD,GAAG,SAAUb,KAAK0D,cAC7B1D,KAAKiE,OAAOpD,GAAG,QAASb,KAAK2D,SAEM,IAA/BpD,EAAE,kBAAkBC,QACpBD,EAAE8D,QAAQxD,GAAG,cAAeb,KAAK4D,gB,EAIzCyB,aAAA,WACIrF,KAAK8D,OAAO1C,IAAI,QAASpB,KAAKyD,SAC9BzD,KAAK+D,MAAM3C,IAAI,SAAUpB,KAAK0D,cAC9B1D,KAAKiE,OAAO7C,IAAI,QAASpB,KAAK2D,SAC9BpD,EAAE8D,QAAQjD,IAAI,cAAepB,KAAK4D,gB,EAGtCF,aAAA,WACI,OAAO,G,EAGXC,QAAA,SAAQ2B,GACJA,EAAMC,iBACNvF,KAAKiE,OAAOE,OACZnE,KAAK8D,OAAOoB,IAAI,IAChBlF,KAAKyD,W,EAGTA,QAAA,WACIzD,KAAKwD,SAASxD,KAAK8D,OAAOoB,Q,EAG9BtB,cAAA,WAAgB,WAER4B,EAAYV,IAASC,SACnBJ,EAAMC,IAAIC,MAAMW,GAAW,GAC3BC,EAAcd,EAAIK,MAAMU,cAAgBf,EAAIK,MAAMW,kBAAoBhB,EAAIK,MAAMC,EAClFvC,EAAiB,CACjBO,SAAU,CACNxB,eAAgB,2BAChByB,QAAS,qBAIbuC,IACAd,EAAIK,MAAMW,iBAAmBF,SAEtBd,EAAIK,MAAMU,oBACVf,EAAIK,MAAMC,SACVN,EAAIK,MAAMpC,SAEb5C,KAAKuD,QAAQ5D,QAAQiG,WACrBjB,EAAIK,MAAM,cAAgBhF,KAAKuD,QAAQ5D,QAAQiG,kBAExCjB,EAAIK,MAAM,cAGjBhF,KAAKuD,QAAQ5D,QAAQM,cAAc4F,2BACnClB,EAAIK,MAAMc,WAAa,MAG3BN,EAAY,eAAeV,IAASiB,iBAAiBpB,EAAIK,OAEzDtC,EAAiB,CACbO,SAAU,CACNxB,eAAgB,sDAChByB,QAAS,+CAEbC,SAAU,qBAIlBnD,KAAK+D,MAAMiC,SAAS,WACpBhG,KAAK6D,MAAMuB,QAAQ,kCAEnBa,IAAIC,QAAQV,EAAW9C,GAAgB,SAACyD,EAAK5E,GAGzC,GAFA,EAAKwC,MAAMqC,YAAY,WAEnBD,EACA,MAAM,IAAIE,MAAMF,GAGpB,EAAKtC,MAAMuB,QAAQ,iCAEf7D,GAAW,EAAKgC,QAAQjC,gBACxB,EAAKiC,QAAQjC,eAAeC,GAGhC,EAAKsC,MAAMuB,QAAQ,oC,EAI3B5B,SAAA,SAASiC,GACL,GAA2B,IAAvBA,EAAYjF,OAAc,CAC1BR,KAAKiE,OAAOE,OACZ,IAAMQ,EAAMG,IAASwB,aAAaxB,IAASC,SAAU,CAAC,IAAK,eAAgB,mBAAoB,WAAY,SAC3GD,IAASyB,QAAQ5B,QACd,GAAIc,EAAYjF,QAAU,EAAG,CAChCR,KAAKiE,OAAOkB,OACZ,IAAIR,EAAMG,IAASwB,aAAaxB,IAASC,SAAU,CAAC,IAAK,eAAgB,mBAAoB,SAC7FJ,EAAMG,IAAS0B,cAAc7B,EAAK,CAAEM,EAAGQ,IACvCX,IAASyB,QAAQ5B,K,EAIzBF,wBAAA,WAA0B,WAChBtD,EAAgBnB,KAAKuD,QAAQpC,cAC/BsF,EAAa3B,IAASC,SACtBrC,EAAiBvB,EAAcuB,eAC7BiC,EAAMC,IAAIC,MAAM4B,GAAY,GAC5BhB,EAAcd,EAAIK,MAAMC,GAAKN,EAAIK,MAAMU,aAGvCgB,EAAY,CAAC,WAAY,eAAgB,IAAK,OAAQ,QAAS,OAAQ,QACvEC,EAAeC,OAAOC,KAAKlC,EAAIK,OAAO8B,QAAO,SAAAC,GAAG,OAAgC,IAA5BL,EAAUM,QAAQD,MAC5B,gBAA7B1C,OAAOC,SAASC,UAAsD,IAAxBoC,EAAanG,QAG1ER,KAAK8D,OAAOoB,IAAI,IAChBlF,KAAKiE,OAAOE,OACZsC,EAAa3B,IAASwB,aAAaG,EAAtB,UAAsCE,EAAtC,CAAoD,eAAgB,IAAK,cAAaM,QAAQ,cAAejH,KAAKoE,kBAC/HC,OAAO6C,QAAQC,aAAa,GAAIC,SAASC,MAAOZ,IACzChB,GAE0B,gBAA7BpB,OAAOC,SAASC,WAChBI,EAAIK,MAAMC,EAAIQ,SACPd,EAAIK,MAAMU,aACb4B,OAAO3C,EAAIK,MAAMpC,YAAc5C,KAAKuD,QAAQ5D,QAAQiG,mBAC7CjB,EAAIK,MAAMpC,SAErByB,OAAO6C,QAAQC,aAAa,GAAIC,SAASC,MAAUrH,KAAKoE,iBAAxD,IAA4EU,IAASiB,iBAAiBpB,EAAIK,gBAGvGL,EAAIK,MAAMC,EACjBN,EAAIK,MAAMU,aAAeD,EACpBd,EAAIK,MAAMpC,WACX+B,EAAIK,MAAMpC,SAAW5C,KAAKuD,QAAQ5D,QAAQiG,YAG9Ca,EAAa,eAAe3B,IAASiB,iBAAiBpB,EAAIK,OAC1DtC,EAAiB,CACbO,SAAU,CACNxB,eAAgB,sDAChByB,QAAS,+CAEbC,SAAU,qBAGdnD,KAAK8D,OAAOoB,IAAI,IAGpB3E,EAAEY,EAAcoC,QAAQgE,iBAAiBpC,OACzCnF,KAAK+D,MAAMiC,SAAS,WAEpBhG,KAAK6D,MAAMuB,QAAQ,kCAEnBa,IAAIC,QAAQO,EAAY/D,GAAgB,SAACyD,EAAK5E,GAI1C,GAHAhB,EAAEY,EAAcoC,QAAQgE,iBAAiBpD,OACzC,EAAKJ,MAAMqC,YAAY,WAEnBD,EACA,MAAM,IAAIE,MAAMF,GAGpB,EAAKtC,MAAMuB,QAAQ,iCAGnBjE,EAAcqG,YAAYjG,GAE1B,EAAKsC,MAAMuB,QAAQ,oC","file":"theme-bundle.chunk.16.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\nimport CatalogPage from './catalog';\n// Supermarket Mod\n// import compareProducts from './global/compare-products';\nimport compareProducts from '../emthemes-modez/compare-products';\nimport FacetedSearch from './common/faceted-search';\nimport { createTranslationDictionary } from '../theme/common/utils/translations-utils';\nimport actionBarFactory from '../emthemes-modez/action-bar'; // Papathemes - Supermarket\nimport { autoExpandCategoryMenu } from '../emthemes-modez/theme-utils'; // Supermarket\nimport bulkOrderFactory from '../emthemes-modez/bulk-order';\nimport SearchInCategory from '../emthemes-modez/search-in-category';\n\nexport default class Category extends CatalogPage {\n    constructor(context) {\n        super(context);\n        this.validationDictionary = createTranslationDictionary(context);\n    }\n\n    onReady() {\n        // console.log('category onReady');\n        autoExpandCategoryMenu(this.context); // Supermarket\n\n        // Papathemes - Bulk Order\n        if (this.context && (this.context.themeSettings.show_bulk_order_mode || this.context.useBulkOrder)) {\n            this.bulkOrder = bulkOrderFactory(this.context);\n        }\n\n        // Supermarket Mod\n        // compareProducts(this.context.urls);\n        compareProducts(this.context);\n\n        if ($('#facetedSearch').length > 0) {\n            this.initFacetedSearch();\n        } else {\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\n        }\n\n        // Papathemes - Supermarket\n        actionBarFactory();\n\n        // Supermarket\n        if (this.context.themeSettings.categorypage_search === 'show') {\n            this.initSearchInCategory();\n        }\n    }\n\n    // Supermarket\n    destroy() {\n        if (this.searchInCategory) {\n            this.searchInCategory.destroy();\n        }\n        if (this.facetedSearch) {\n            this.facetedSearch.destroy();\n        } else {\n            hooks.off('sortBy-submitted', this.onSortBySubmit);\n        }\n    }\n\n    // Supermarket\n    initSearchInCategory() {\n        this.searchInCategory = new SearchInCategory({\n            context: this.context,\n            facetedSearch: this.facetedSearch,\n            searchCallback: (content) => {\n                $('#product-listing-container').html(content.productListing);\n\n                if (this.bulkOrder) {\n                    this.bulkOrder.reinit();\n                }\n\n                actionBarFactory();\n\n                $('body').triggerHandler('compareReset');\n\n                $('html, body').animate({\n                    scrollTop: 0,\n                }, 100);\n            },\n        });\n    }\n\n    initFacetedSearch() {\n        const {\n            price_min_evaluation: onMinPriceError,\n            price_max_evaluation: onMaxPriceError,\n            price_min_not_entered: minPriceNotEntered,\n            price_max_not_entered: maxPriceNotEntered,\n            price_invalid_value: onInvalidPrice,\n        } = this.validationDictionary;\n        const $productListingContainer = $('#product-listing-container');\n        const $facetedSearchContainer = $('#faceted-search-container');\n        const productsPerPage = this.context.categoryProductsPerPage;\n        const requestOptions = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: productsPerPage,\n                    },\n                },\n            },\n            template: {\n                productListing: 'category/product-listing',\n                sidebar: 'category/sidebar',\n            },\n            showMore: 'category/show-more',\n        };\n\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\n            $productListingContainer.html(content.productListing);\n            $facetedSearchContainer.html(content.sidebar);\n\n            // Papathemes - Bulk Order\n            if (this.bulkOrder) {\n                this.bulkOrder.reinit();\n            }\n\n            $('body').triggerHandler('compareReset');\n\n            $('html, body').animate({\n                scrollTop: 0,\n            }, 100);\n        }, {\n            validationErrorMessages: {\n                onMinPriceError,\n                onMaxPriceError,\n                minPriceNotEntered,\n                maxPriceNotEntered,\n                onInvalidPrice,\n            },\n        });\n    }\n}\n","import { api } from '@bigcommerce/stencil-utils';\nimport { debounce } from 'lodash';\nimport Url from 'url';\nimport urlUtils from '../theme/common/utils/url-utils';\n\nexport default class SearchInCategory {\n    /**\n     * Constructor\n     *\n     * Should be constructed after FacetedSearch object constructed\n     * so that FacetedSearch `statechange` event callback can be executed.\n     *\n     * `options` includes:\n     * - (object) `context`: from PageManager.context.\n     * - (object) `facetedSearch`\n     * - (function) `searchCallback`: callback to re-render search results.\n     *\n     * @param {object} options\n     */\n    constructor(options) {\n        // console.log('search-in-category constructor');\n        this.doSearch = debounce(this.doSearch.bind(this), 500);\n        this.onInput = this.onInput.bind(this);\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onClear = this.onClear.bind(this);\n        this.onStateChange = this.onStateChange.bind(this);\n        this.options = options;\n        this.$body = $('body');\n        this.$input = $('[data-search-in-category]');\n        this.$form = this.$input.closest('form');\n        this.$clear = this.$form.find('[data-clear]').hide();\n        this.originalPathname = window.location.pathname;\n\n        if (options && options.facetedSearch) {\n            this.options.facetedSearch.updateViewCallback = this.updateViewFacetedSearch.bind(this);\n        }\n\n        this.bindEvents();\n\n        const url = Url.parse(urlUtils.getUrl(), true);\n        if (url.query.q) {\n            this.$input.val(url.query.q);\n            this.$clear.show();\n            $(window).trigger('statechange');\n        }\n    }\n\n    destroy() {\n        // console.log('search-in-category destroy');\n        this.unbindEvents();\n    }\n\n    bindEvents() {\n        this.$input.on('input', this.onInput);\n        this.$form.on('submit', this.onFormSubmit);\n        this.$clear.on('click', this.onClear);\n\n        if ($('#facetedSearch').length === 0) {\n            $(window).on('statechange', this.onStateChange);\n        }\n    }\n\n    unbindEvents() {\n        this.$input.off('input', this.onInput);\n        this.$form.off('submit', this.onFormSubmit);\n        this.$clear.off('click', this.onClear);\n        $(window).off('statechange', this.onStateChange);\n    }\n\n    onFormSubmit() {\n        return false;\n    }\n\n    onClear(event) {\n        event.preventDefault();\n        this.$clear.hide();\n        this.$input.val('');\n        this.onInput();\n    }\n\n    onInput() {\n        this.doSearch(this.$input.val());\n    }\n\n    onStateChange() {\n        // console.log('search-in-category statechange');\n        let searchUrl = urlUtils.getUrl();\n        const url = Url.parse(searchUrl, true);\n        const searchQuery = url.query.search_query || url.query.search_query_adv || url.query.q;\n        let requestOptions = {\n            template: {\n                productListing: 'category/product-listing',\n                sidebar: 'category/sidebar',\n            },\n        };\n\n        if (searchQuery) {\n            url.query.search_query_adv = searchQuery;\n\n            delete url.query.search_query;\n            delete url.query.q;\n            delete url.query.category;\n\n            if (this.options.context.categoryId) {\n                url.query['category[]'] = this.options.context.categoryId;\n            } else {\n                delete url.query['category[]'];\n            }\n\n            if (this.options.context.themeSettings.categorypage_search_subs) {\n                url.query.searchsubs = 'ON';\n            }\n\n            searchUrl = `/search.php?${urlUtils.buildQueryString(url.query)}`;\n\n            requestOptions = {\n                template: {\n                    productListing: 'papa-supermarket/search-in-category/product-listing',\n                    sidebar: 'papa-supermarket/search-in-category/sidebar',\n                },\n                showMore: 'search/show-more',\n            };\n        }\n\n        this.$form.addClass('loading');\n        this.$body.trigger('beforerequest.searchincategory');\n\n        api.getPage(searchUrl, requestOptions, (err, content) => {\n            this.$form.removeClass('loading');\n\n            if (err) {\n                throw new Error(err);\n            }\n\n            this.$body.trigger('beforeupdate.searchincategory');\n\n            if (content && this.options.searchCallback) {\n                this.options.searchCallback(content);\n            }\n\n            this.$body.trigger('afterupdate.searchincategory');\n        });\n    }\n\n    doSearch(searchQuery) {\n        if (searchQuery.length === 0) {\n            this.$clear.hide();\n            const url = urlUtils.removeParams(urlUtils.getUrl(), ['q', 'search_query', 'search_query_adv', 'category', 'page']);\n            urlUtils.goToUrl(url);\n        } else if (searchQuery.length >= 3) {\n            this.$clear.show();\n            let url = urlUtils.removeParams(urlUtils.getUrl(), ['q', 'search_query', 'search_query_adv', 'page']);\n            url = urlUtils.replaceParams(url, { q: searchQuery });\n            urlUtils.goToUrl(url);\n        }\n    }\n\n    updateViewFacetedSearch() {\n        const facetedSearch = this.options.facetedSearch;\n        let requestUrl = urlUtils.getUrl();\n        let requestOptions = facetedSearch.requestOptions;\n        const url = Url.parse(requestUrl, true);\n        const searchQuery = url.query.q || url.query.search_query;\n\n        // Check if the URL is 'Clear All', then clear the search query as well\n        const stdParams = ['_bc_fsnf', 'search_query', 'q', 'sort', 'limit', 'mode', 'page'];\n        const filterParams = Object.keys(url.query).filter(key => stdParams.indexOf(key) === -1);\n        const isClearAll = window.location.pathname === '/search.php' && filterParams.length === 0;\n\n        if (isClearAll) {\n            this.$input.val('');\n            this.$clear.hide();\n            requestUrl = urlUtils.removeParams(requestUrl, [...filterParams, 'search_query', 'q', '_bc_fsnf']).replace('/search.php', this.originalPathname);\n            window.history.replaceState({}, document.title, requestUrl);\n        } else if (searchQuery) {\n            // Show nice URL on the location bar\n            if (window.location.pathname === '/search.php') {\n                url.query.q = searchQuery;\n                delete url.query.search_query;\n                if (Number(url.query.category) === this.options.context.categoryId) {\n                    delete url.query.category;\n                }\n                window.history.replaceState({}, document.title, `${this.originalPathname}?${urlUtils.buildQueryString(url.query)}`);\n            }\n\n            delete url.query.q;\n            url.query.search_query = searchQuery;\n            if (!url.query.category) {\n                url.query.category = this.options.context.categoryId;\n            }\n\n            requestUrl = `/search.php?${urlUtils.buildQueryString(url.query)}`;\n            requestOptions = {\n                template: {\n                    productListing: 'papa-supermarket/search-in-category/product-listing',\n                    sidebar: 'papa-supermarket/search-in-category/sidebar',\n                },\n                showMore: 'search/show-more',\n            };\n        } else {\n            this.$input.val('');\n        }\n\n        $(facetedSearch.options.blockerSelector).show();\n        this.$form.addClass('loading');\n\n        this.$body.trigger('beforerequest.searchincategory');\n\n        api.getPage(requestUrl, requestOptions, (err, content) => { // Supermarket MOD\n            $(facetedSearch.options.blockerSelector).hide();\n            this.$form.removeClass('loading');\n\n            if (err) {\n                throw new Error(err);\n            }\n\n            this.$body.trigger('beforeupdate.searchincategory');\n\n            // Refresh view with new content\n            facetedSearch.refreshView(content);\n\n            this.$body.trigger('afterupdate.searchincategory');\n        });\n    }\n}\n"],"sourceRoot":""}